import{_ as D,b as _,w as l,d as q,o as m,e as t,V as I,s as c,g as p,M,aH as C,j as h,k as T,F as r,aG as B,q as n,n as u,t as i,m as k,G as w,C as v,l as F,bD as P,J as U}from"./App-D3npthgT.js";import{V as x,a as N}from"./VTabs-vS85Ozc8.js";const L={name:"mycoperative-payment-create",data:()=>({datemenu:!1,formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),statuses:[],tab:"deposit"}),methods:{changePaymentMode(d,a){switch(d){case 1:a.grandtotal=a.total;break;case 2:a.grandtotal=a.total+a.sequence;break;case 3:a.grandtotal=a.total+a.sequence;break}},getAllPayment:function(d,a){this.$http("mycoperative/api/payment/get-payment",{method:"GET",params:{mode:d}}).then(s=>{a.deposits=s.deposits,a.loans=s.loans,a.details_count=s.details_count,a.deposits_total=0,a.loans_total=0,a.total=0,a.grandtotal=0})},onDepositClick(d,a){a.total=0;for(let s=0;s<a.deposits.length;s++)a.deposits[s].selected=!1;for(let s=0;s<=d;s++)switch(a.deposits[s].selected=!0,a.deposits_total=parseFloat(a.total)+parseFloat(a.deposits[s].grandtotal),a.total=parseFloat(a.deposits_total)+parseFloat(a.loans_total),a.paymentmode_id){case 1:a.grandtotal=a.total;break;case 2:a.grandtotal=a.total+a.sequence;break;case 3:a.grandtotal=a.total+a.sequence;break}},onLoanClick(d,a){a.total=0;for(let s=0;s<a.loans.length;s++)a.loans[s].selected=!1;for(let s=0;s<=d;s++)switch(a.loans[s].selected=!0,a.loans_total=parseFloat(a.total)+parseFloat(a.loans[s].grandtotal),a.total=parseFloat(a.deposits_total)+parseFloat(a.loans_total),a.paymentmode_id){case 1:a.grandtotal=a.total;break;case 2:a.grandtotal=a.total+a.sequence;break;case 3:a.grandtotal=a.total+a.sequence;break}},postFormCreate(d,a){a.$http("mycoperative/api/payment",{method:"POST",params:d,contentType:"multipart/form-data"}).then(()=>{this.$router.push({name:"mycoperative-payment"})})}}},S={class:"d-block pb-2"},A={class:"d-flex pa-2"},J={class:"d-block pb-2"},j={class:"d-flex pa-2"},E={key:2,class:"ukuran"},G={class:"d-flex"},O={class:"text-end"},R={class:"d-flex"},W={class:"text-end"};function z(d,a,s,H,K,b){const $=q("form-create");return m(),_($,{getdata:"","with-helpdesk":"","hide-save":"",ref:"form"},{toolbar:l(({record:y})=>[t(I,{disabled:!(y.total>0&&y.paymentmode_id),onClick:a[0]||(a[0]=o=>d.$refs.form.postFormCreate()),icon:"payments"},null,8,["disabled"])]),default:l(({combos:{paymentmodes:y},record:o,theme:f})=>[o.details_count&&o.details_count<=0?(m(),_(c,{key:0,class:"text-center"},{default:l(()=>a[3]||(a[3]=[p(" Tidak ada Pembayaran ")])),_:1})):(m(),_(c,{key:1,class:"pt-0"},{default:l(()=>[t(M,{color:"primary",label:"Lihat pembayaran mendatang","false-value":null,"true-value":"comming","hide-details":"","onUpdate:modelValue":e=>b.getAllPayment(e,o)},null,8,["onUpdate:modelValue"]),t(N,{modelValue:d.tab,"onUpdate:modelValue":a[1]||(a[1]=e=>d.tab=e),"align-tabs":"center",color:"deep-purple-accent-4"},{default:l(()=>[t(x,{value:"deposit"},{default:l(()=>a[4]||(a[4]=[p("DEPOSIT")])),_:1}),t(x,{value:"pinjaman"},{default:l(()=>a[5]||(a[5]=[p("PINJAMAN")])),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:d.tab,"onUpdate:modelValue":a[2]||(a[2]=e=>d.tab=e)},{default:l(()=>[t(C,{value:"deposit"},{default:l(()=>[(m(!0),h(r,null,T(o.deposits,(e,g)=>(m(),_(F,{lines:"three",key:g,onClick:V=>b.onDepositClick(g,o)},{default:l(()=>[n("div",S,[t(v,null,{default:l(()=>[n("div",A,[n("div",null,[t(P,{density:"compact",modelValue:e.selected,"onUpdate:modelValue":V=>e.selected=V,readonly:"",color:f},null,8,["modelValue","onUpdate:modelValue","color"])]),n("div",null,i(e.name),1)]),t(c,{class:U(["px-3 py-2",`bg-${f}-lighten-5`])},{default:l(()=>[t(k,{dense:""},{default:l(()=>[t(u,{class:"caption",cols:"2"},{default:l(()=>a[6]||(a[6]=[p("Tenor")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[7]||(a[7]=[p("Tagihan")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[8]||(a[8]=[p("Jatuh Tempo")])),_:1}),t(u,{cols:"2"},{default:l(()=>[n("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[n("small",null,i(d.formatter.format(e.grandtotal)),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[n("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:2},1024),t(C,{value:"pinjaman"},{default:l(()=>[(m(!0),h(r,null,T(o.loans,(e,g)=>(m(),_(F,{lines:"three",key:g,onClick:V=>b.onLoanClick(g,o)},{default:l(()=>[n("div",J,[t(v,null,{default:l(()=>[n("div",j,[n("div",null,[t(P,{density:"compact",modelValue:e.selected,"onUpdate:modelValue":V=>e.selected=V,readonly:"",color:f},null,8,["modelValue","onUpdate:modelValue","color"])]),n("div",null,i(e.name),1)]),t(c,{class:U(["px-3 py-2",`bg-${f}-lighten-5`])},{default:l(()=>[t(k,{dense:""},{default:l(()=>[t(u,{class:"caption",cols:"2"},{default:l(()=>a[9]||(a[9]=[p("Tenor")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[10]||(a[10]=[p("Tagihan")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[11]||(a[11]=[p("Jatuh Tempo")])),_:1}),t(u,{cols:"2"},{default:l(()=>[n("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[n("small",null,i(d.formatter.format(e.grandtotal)),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[n("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)),o.details_count&&o.details_count<=0?(m(),h("div",E,[t(v,{color:`${f}-lighten-5`,flat:"",class:"positionfixed","scroll-behavior":"elevate"},{default:l(()=>[n("div",G,[t(u,{cols:"6"},{default:l(()=>a[12]||(a[12]=[n("small",null,"Total Pembayaran",-1)])),_:1}),t(u,{cols:"6",class:"font-weight-bold"},{default:l(()=>[n("div",O,i(d.formatter.format(o.grandtotal)),1)]),_:2},1024)]),t(k,null,{default:l(()=>[t(u,{cols:"12"},{default:l(()=>[t(w,{items:y,disabled:o.details_count&&o.details_count<=0,label:"Mode Pembayaran",modelValue:o.paymentmode_id,"onUpdate:modelValue":[e=>o.paymentmode_id=e,e=>b.changePaymentMode(e,o)],return_value:"false","hide-details":""},null,8,["items","disabled","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])])):(m(),_(v,{key:3,color:`${f}-lighten-5`,flat:"",class:"position-sticky bottom-0 w-100","scroll-behavior":"elevate"},{default:l(()=>[n("div",R,[t(u,{cols:"6"},{default:l(()=>a[13]||(a[13]=[n("small",null,"Total Pembayaran",-1)])),_:1}),t(u,{cols:"6",class:"font-weight-bold"},{default:l(()=>[n("div",W,i(d.formatter.format(o.grandtotal)),1)]),_:2},1024)]),t(k,null,{default:l(()=>[t(u,{cols:"12"},{default:l(()=>[t(w,{items:y,disabled:o.details_count&&o.details_count<=0,label:"Mode Pembayaran",modelValue:o.paymentmode_id,"onUpdate:modelValue":[e=>o.paymentmode_id=e,e=>b.changePaymentMode(e,o)],return_value:"false","hide-details":""},null,8,["items","disabled","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"]))]),_:1},512)}const Y=D(L,[["render",z],["__scopeId","data-v-5d600dc2"]]);export{Y as default};
