import{_ as I,b as c,w as a,j as h,l as g,p as m,e as t,M as x,S as C,k as T,F as P,T as B,i as o,g as n,t as i,V as v,G as U,D as k,m as N,d as E,o as p,s as w,U as $,J as F}from"./App-DxUS_QIK.js";import{V as M,a as L}from"./VTabs-I_vplvwP.js";const S={name:"mycoperative-payment-create",data:()=>({tab:"deposit",formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})}),methods:{changePaymentMode(d,l){switch(d){case 1:l.grandtotal=l.total;break;case 2:case 3:l.grandtotal=l.total+(l.sequence||0);break}},getAllPayment(d,l){this.$http("mycoperative/api/payment/get-payment",{method:"GET",params:{mode:d}}).then(u=>{l.deposits=u.deposits,l.loans=u.loans,l.details_count=u.details_count,l.deposits_total=0,l.loans_total=0,l.total=0,l.grandtotal=0})},onDepositClick(d,l){l.total=0,l.deposits.forEach((u,_)=>u.selected=_<=d),l.deposits_total=l.deposits.filter(u=>u.selected).reduce((u,_)=>u+parseFloat(_.grandtotal||0),0),l.total=l.deposits_total+(l.loans_total||0),this.changePaymentMode(l.paymentmode_id,l)},onLoanClick(d,l){l.total=0,l.loans.forEach((u,_)=>u.selected=_<=d),l.loans_total=l.loans.filter(u=>u.selected).reduce((u,_)=>u+parseFloat(_.grandtotal||0),0),l.total=(l.deposits_total||0)+l.loans_total,this.changePaymentMode(l.paymentmode_id,l)},postFormCreate(){this.$refs.form.postFormCreate().then(()=>{this.$router.push({name:"mycoperative-payment"})})}}},A={class:"d-block pb-2"},J={class:"d-flex pa-2"},j={class:"d-block pb-2"},G={class:"d-flex pa-2"},R={key:2,class:"ukuran"},W={class:"d-flex"},q={class:"text-end"},z={class:"d-flex"},O={class:"text-end"};function H(d,l,u,_,K,y){const D=E("form-create");return p(),c(D,{getdata:"","with-helpdesk":"","hide-save":"",ref:"form"},{toolbar:a(({record:b})=>[t(N,{disabled:!(b.total>0&&b.paymentmode_id),onClick:l[0]||(l[0]=s=>d.$refs.form.postFormCreate()),icon:"payments"},null,8,["disabled"])]),default:a(({combos:{paymentmodes:b},record:s,theme:f})=>[s.details_count&&s.details_count<=0?(p(),c(g,{key:0,class:"text-center"},{default:a(()=>l[3]||(l[3]=[m(" Tidak ada Pembayaran ")])),_:1,__:[3]})):(p(),c(g,{key:1,class:"pt-0"},{default:a(()=>[t(x,{color:"primary",label:"Lihat pembayaran mendatang","false-value":null,"true-value":"comming","hide-details":"","onUpdate:modelValue":e=>y.getAllPayment(e,s)},null,8,["onUpdate:modelValue"]),t(L,{modelValue:d.tab,"onUpdate:modelValue":l[1]||(l[1]=e=>d.tab=e),"align-tabs":"center",color:"deep-purple-accent-4"},{default:a(()=>[t(M,{value:"deposit"},{default:a(()=>l[4]||(l[4]=[m("DEPOSIT")])),_:1,__:[4]}),t(M,{value:"pinjaman"},{default:a(()=>l[5]||(l[5]=[m("PINJAMAN")])),_:1,__:[5]})]),_:1},8,["modelValue"]),t(B,{modelValue:d.tab,"onUpdate:modelValue":l[2]||(l[2]=e=>d.tab=e)},{default:a(()=>[t(C,{value:"deposit"},{default:a(()=>[(p(!0),h(P,null,T(s.deposits,(e,r)=>(p(),c(w,{lines:"three",key:r,onClick:V=>y.onDepositClick(r,s)},{default:a(()=>[o("div",A,[t(k,null,{default:a(()=>[o("div",J,[o("div",null,[t($,{density:"compact",modelValue:e.selected,"onUpdate:modelValue":V=>e.selected=V,readonly:"",color:f},null,8,["modelValue","onUpdate:modelValue","color"])]),o("div",null,i(e.name),1)]),t(g,{class:F(["px-3 py-2",`bg-${f}-lighten-5`])},{default:a(()=>[t(v,{dense:""},{default:a(()=>[t(n,{class:"caption",cols:"2"},{default:a(()=>l[6]||(l[6]=[m("Tenor")])),_:1,__:[6]}),t(n,{class:"caption",cols:"5"},{default:a(()=>l[7]||(l[7]=[m("Tagihan")])),_:1,__:[7]}),t(n,{class:"caption",cols:"5"},{default:a(()=>l[8]||(l[8]=[m("Jatuh Tempo")])),_:1,__:[8]}),t(n,{cols:"2"},{default:a(()=>[o("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(n,{cols:"5"},{default:a(()=>[o("small",null,i(d.formatter.format(e.grandtotal)),1)]),_:2},1024),t(n,{cols:"5"},{default:a(()=>[o("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:2},1024),t(C,{value:"pinjaman"},{default:a(()=>[(p(!0),h(P,null,T(s.loans,(e,r)=>(p(),c(w,{lines:"three",key:r,onClick:V=>y.onLoanClick(r,s)},{default:a(()=>[o("div",j,[t(k,null,{default:a(()=>[o("div",G,[o("div",null,[t($,{density:"compact",modelValue:e.selected,"onUpdate:modelValue":V=>e.selected=V,readonly:"",color:f},null,8,["modelValue","onUpdate:modelValue","color"])]),o("div",null,i(e.name),1)]),t(g,{class:F(["px-3 py-2",`bg-${f}-lighten-5`])},{default:a(()=>[t(v,{dense:""},{default:a(()=>[t(n,{class:"caption",cols:"2"},{default:a(()=>l[9]||(l[9]=[m("Tenor")])),_:1,__:[9]}),t(n,{class:"caption",cols:"5"},{default:a(()=>l[10]||(l[10]=[m("Tagihan")])),_:1,__:[10]}),t(n,{class:"caption",cols:"5"},{default:a(()=>l[11]||(l[11]=[m("Jatuh Tempo")])),_:1,__:[11]}),t(n,{cols:"2"},{default:a(()=>[o("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(n,{cols:"5"},{default:a(()=>[o("small",null,i(d.formatter.format(e.grandtotal)),1)]),_:2},1024),t(n,{cols:"5"},{default:a(()=>[o("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)),s.details_count&&s.details_count<=0?(p(),h("div",R,[t(k,{color:`${f}-lighten-5`,flat:"",class:"positionfixed","scroll-behavior":"elevate"},{default:a(()=>[o("div",W,[t(n,{cols:"6"},{default:a(()=>l[12]||(l[12]=[o("small",null,"Total Pembayaran",-1)])),_:1,__:[12]}),t(n,{cols:"6",class:"font-weight-bold"},{default:a(()=>[o("div",q,i(d.formatter.format(s.grandtotal)),1)]),_:2},1024)]),t(v,null,{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(U,{items:b,disabled:s.details_count&&s.details_count<=0,label:"Mode Pembayaran",modelValue:s.paymentmode_id,"onUpdate:modelValue":[e=>s.paymentmode_id=e,e=>y.changePaymentMode(e,s)],return_value:"false","hide-details":""},null,8,["items","disabled","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])])):(p(),c(k,{key:3,color:`${f}-lighten-5`,flat:"",class:"position-sticky bottom-0 w-100","scroll-behavior":"elevate"},{default:a(()=>[o("div",z,[t(n,{cols:"6"},{default:a(()=>l[13]||(l[13]=[o("small",null,"Total Pembayaran",-1)])),_:1,__:[13]}),t(n,{cols:"6",class:"font-weight-bold"},{default:a(()=>[o("div",O,i(d.formatter.format(s.grandtotal)),1)]),_:2},1024)]),t(v,null,{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(U,{items:b,disabled:s.details_count&&s.details_count<=0,label:"Mode Pembayaran",modelValue:s.paymentmode_id,"onUpdate:modelValue":[e=>s.paymentmode_id=e,e=>y.changePaymentMode(e,s)],return_value:"false","hide-details":""},null,8,["items","disabled","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"]))]),_:1},512)}const Y=I(S,[["render",H],["__scopeId","data-v-36286c37"]]);export{Y as default};
