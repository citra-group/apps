import{_ as B,b as s,w as t,d as v,o as d,V as _,h as r,e,q as g,t as c,S as U,s as w,m as k,n as i,E as C,I as $,P as S,f as x,g as p,Q as N,N as F,U as R,C as T,D as A,W as E,O as L}from"./App-CdcRqZFE.js";import{V as D}from"./VTextarea-DxLIzM1C.js";import{V as P}from"./VBanner-CHyyAIDm.js";const H={name:"coperative-withdrawal-show",computed:{lastAvailableDate(){var n=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()+1);return n.toISOString().slice(0,10)}},data:()=>({model:!1,currentDate:new Date,dialogMessage:!1,dialogMode:null,transferDate:!1,formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})}),methods:{dateFormated(n){if(!n)return null;const[l,b,y]=n.split("-");return`${y}-${b}-${l}`},openDialogMessage(n){this.dialogMessage=!0,this.dialogMode=n},approvedCurrentSubmission(n,l){l.$http(`coperative/api/withdrawal/${n.id}/approved`,{method:"PUT",params:n}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},completedCurrentSubmission(n,l){if(!n.transferdate){this.$refs.form.showErrorMessage("tanggal transfer di perlukan!");return}if(!n.transfer_path&&!n.image_path){this.$refs.form.showErrorMessage("bukti transfer di perlukan!");return}l.$http(`coperative/api/withdrawal/${n.id}/completed`,{method:"POST",params:n,contentType:"multipart/form-data"}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},deniedCurrentSubmission(n,l){l.$http(`coperative/api/withdrawal/${n.id}/denied`,{method:"PUT",params:n}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},printedCurrentSubmission(n,l){l.$http(`coperative/api/withdrawal/${n.id}/printed`,{method:"PUT",params:n}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},repairedCurrentSubmission(n,l){l.$http(`coperative/api/withdrawal/${n.id}/repaired`,{method:"PUT",params:n}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},verifiedCurrentSubmission(n,l){l.$http(`coperative/api/withdrawal/${n.id}/verified`,{method:"PUT",params:n}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})}}},O={class:"text-caption pr-1 pl-2"},K={class:"d-flex justify-center"},j={class:"text-right"};function z(n,l,b,y,q,f){const h=v("v-currency-field"),I=v("v-date-input"),M=v("form-show");return d(),s(M,{"with-helpdesk":"","hide-edit":"","hide-delete":""},{toolbar:t(({record:m,store:a})=>[m.status==="COMPLETED"&&m.transfermode===1?(d(),s(_,{key:0,icon:"print",tooltip:"Cetak Tanda Terima",onClick:V=>f.printedCurrentSubmission(m,a)},null,8,["onClick"])):r("",!0)]),default:t(({statuses:{isVerificator:m},record:a,store:V,theme:u})=>[e(U,{color:u,class:"position-absolute d-flex pa-1",rounded:"pill",style:{top:"8px",right:"8px"}},{default:t(()=>[l[2]||(l[2]=g("div",{class:"text-caption bg-white rounded-pill px-2"},"STS",-1)),g("div",O,c(a.status),1)]),_:2},1032,["color"]),e(U,{class:"transparent"},{default:t(()=>[e(w,null,{default:t(()=>[e(k,{dense:""},{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(C,{label:"Nomor",modelValue:a.slug,"onUpdate:modelValue":o=>a.slug=o,"hide-details":"",variant:"outlined",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12"},{default:t(()=>[e(C,{label:"Nama",modelValue:a.name,"onUpdate:modelValue":o=>a.name=o,variant:"outlined",color:u,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e($),e(w,null,{default:t(()=>[e(k,{dense:""},{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(h,{label:"Tabungan",prefix:"Rp",modelValue:a.amount_of_saving,"onUpdate:modelValue":o=>a.amount_of_saving=o,variant:"outlined",color:u,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),e(i,{cols:"12"},{default:t(()=>[e(h,{label:"Penarikan",prefix:"Rp",modelValue:a.amount_of_withdrawal,"onUpdate:modelValue":o=>a.amount_of_withdrawal=o,variant:"outlined",color:u,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),e(i,{cols:"12"},{default:t(()=>[e(h,{label:"Total",prefix:"Rp",modelValue:a.amount_of_deposit,"onUpdate:modelValue":o=>a.amount_of_deposit=o,variant:"outlined",color:u,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),e(i,{cols:"12"},{default:t(()=>[e(h,{prefix:"Rp",label:"Nominal Penarikan",modelValue:a.total,"onUpdate:modelValue":o=>a.total=o,variant:"outlined",color:u,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),e(i,{cols:"12"},{default:t(()=>[e(D,{label:"Keterangan",rows:"3",modelValue:a.description,"onUpdate:modelValue":o=>a.description=o,variant:"outlined",color:u,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),a.status==="PUBLISH"&&a.transfermode===2?(d(),s(i,{key:0,cols:"12"},{default:t(()=>[e(P,{lines:"tow",stacked:!1},{default:t(()=>[e(S,{class:"mr-2",line:"three",color:"deep-purple accent-4",size:"40"},{default:t(()=>[e(x,{color:"white"},{default:t(()=>l[3]||(l[3]=[p("privacy_tip")])),_:1})]),_:1}),p(" Pembayaran dapat dilakukan dengan cara transfer ke. Bank "+c(a.bank_name)+" atas nama: "+c(a.bank_account_name)+" dengan nomor rekening "+c(a.bank_account_number)+" Setelah transfer dilakukan, silahkan unggah bukti bayar dibawah ini. ",1)]),_:2},1024)]),_:2},1024)):r("",!0),a.status==="PUBLISH"&&a.transfermode===1?(d(),s(i,{key:1,cols:"12"},{default:t(()=>[e(P,{lines:"tow",stacked:!1},{default:t(()=>[e(S,{class:"mr-2",line:"three",color:"deep-purple accent-4",size:"40"},{default:t(()=>[e(x,{color:"white"},{default:t(()=>l[4]||(l[4]=[p("privacy_tip")])),_:1})]),_:1}),l[5]||(l[5]=p(" Pembayaran dilakukan langsung secara tunai kepada Anggota. Instruksi: Pastikan petugas memberikan bukti pembayaran resmi kepada Anggota, dan catat transaksi di sistem. "))]),_:1})]),_:1})):r("",!0)]),_:2},1024),a.status==="PUBLISH"?(d(),s(k,{key:0},{default:t(()=>[a.transfer_path?(d(),s(i,{key:0,cols:"12"},{default:t(()=>[e(N,{src:a.transfer_path},null,8,["src"])]),_:2},1024)):r("",!0),a.transfer_path?r("",!0):(d(),s(i,{key:1,cols:"4"},{default:t(()=>[g("div",K,[e(I,{modelValue:a.transferdate,"onUpdate:modelValue":o=>a.transferdate=o,label:"Tanggal Transfer","prepend-icon":"","prepend-inner-icon":"$calendar"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)),a.transfer_path?r("",!0):(d(),s(i,{key:2,cols:"8"},{default:t(()=>[e(F,{accept:"image/*",label:"File input","prepend-icon":"","prepend-inner-icon":"attach_file",modelValue:a.image_path,"onUpdate:modelValue":o=>a.image_path=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024)):r("",!0)]),_:2},1024),e(w,{class:"d-flex mb-4 justify-end"},{default:t(()=>[g("div",j,[m&&a.status==="PUBLISH"?(d(),s(_,{key:0,disabled:!a.transferdate||!a.image_path,color:u,onClick:o=>f.completedCurrentSubmission(a,V)},{default:t(()=>l[6]||(l[6]=[p("Selesai")])),_:2},1032,["disabled","color","onClick"])):r("",!0)])]),_:2},1024),e(R,{modelValue:n.dialogMessage,"onUpdate:modelValue":l[1]||(l[1]=o=>n.dialogMessage=o),width:"500"},{default:t(()=>[e(T,null,{default:t(()=>[e(A,{class:"text-h5 grey lighten-2"},{default:t(()=>l[7]||(l[7]=[p("Keterangan")])),_:1}),e(w,null,{default:t(()=>[e(k,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(D,{modelValue:a.message,"onUpdate:modelValue":o=>a.message=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e($),e(E,null,{default:t(()=>[e(L),e(_,{color:"grey",text:"",onClick:l[0]||(l[0]=o=>n.dialogMessage=!1)},{default:t(()=>l[8]||(l[8]=[p(" Batal ")])),_:1}),e(_,{color:"primary",text:"",onClick:o=>n.dialogMode==="denied"?f.deniedCurrentSubmission(a,V):f.repairedCurrentSubmission(a,V)},{default:t(()=>l[9]||(l[9]=[p("Kirim")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024),e(T,{class:"position-fixed bottom-0"})]),_:1})}const G=B(H,[["render",z]]);export{G as default};
