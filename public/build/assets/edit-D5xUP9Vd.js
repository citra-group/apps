import{_ as V,b as f,w as i,j as g,f as c,e as n,t as k,m as R,p as v,V as o,g as T,E as U,R as C,Y as I,l as $,d as x,o as d}from"./App-Y1uS_7oZ.js";const y={name:"infrastructure-images-edit",data:()=>({init:!1,blob_path:""}),methods:{initImg:(a,e)=>{e.blob_path=a.data.base64},changeImg:(a,e)=>{if(a.file_image==""||a.file_image==null)e.blob_path=a.data.base64;else{const t=URL.createObjectURL(a.file_image);e.blob_path=t}},updateRecord:function(a,e){let t=this.$router.currentRoute._value.href;this.$router.currentRoute._value.name,t=t.replace("/edit",""),t=t.substring(1),t=t.replace("infrastructure/","infrastructure/api/"),this.$http(t,{method:"POST",params:{_method:"PUT",...a},contentType:"multipart/form-data"}).then(m=>{let r=e.records.findIndex(s=>s.id==a.id);e.records[r]=m,e.openFormData(),e.snackbar.color="green",e.snackbar.text=`ubah data ${e.pageKey} berhasil`,e.snackbar.state=!0})}}},w={key:0};function B(a,e,t,m,r,s){const _=x("form-edit");return d(),f(_,{"with-helpdesk":"","hide-update":""},{default:i(({record:l,theme:b,store:h})=>{var p;return[!a.init&&((p=l==null?void 0:l.data)!=null&&p.base64)?(d(),g("div",w,k(s.initImg(l,this)),1)):c("",!0),n($,null,{default:i(()=>[n(R,{style:{width:"100%"},class:"mb-4",variant:"flat",color:b,onClick:u=>s.updateRecord(l,h)},{default:i(()=>e[0]||(e[0]=[v(" UPDATE DATA ")])),_:2},1032,["color","onClick"]),n(o,{dense:""},{default:i(()=>[n(T,{cols:"12"},{default:i(()=>[n(U,{label:"Name",modelValue:l.name,"onUpdate:modelValue":u=>l.name=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),n(o,{dense:""},{default:i(()=>[n(C,{label:"Gambar",modelValue:l.file_image,"onUpdate:modelValue":[u=>l.file_image=u,u=>s.changeImg(l,this)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n(o,{dense:""},{default:i(()=>[a.blob_path!=null&&a.blob_path!=""?(d(),f(I,{key:0,src:a.blob_path,"aspect-ratio":"16/9",cover:""},null,8,["src"])):c("",!0)]),_:1})]),_:2},1024)]}),_:1})}const N=V(y,[["render",B]]);export{N as default};
