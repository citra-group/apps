import{_ as I,b,w as l,e as t,l as g,p as m,M,S as C,j as T,k as h,F as w,T as B,i as u,g as n,t as i,V as k,G as N,D as v,m as x,d as E,o as f,s as P,U,J as F}from"./App-Y1uS_7oZ.js";import{V as D,a as L}from"./VTabs-ExaDAqpY.js";const S={name:"mycoperative-payment-create",data:()=>({tab:"deposit",formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})}),methods:{changePaymentMode(o,a){switch(o){case 1:a.grandtotal=a.total;break;case 2:case 3:a.grandtotal=a.total+(a.sequence||0);break}},getAllPayment(o,a){this.$http("mycoperative/api/payment/get-payment",{method:"GET",params:{mode:o}}).then(s=>{a.deposits=s.deposits,a.loans=s.loans,a.details_count=s.details_count,a.deposits_total=0,a.loans_total=0,a.total=0,a.grandtotal=0})},onDepositClick(o,a){a.total=0,a.deposits.forEach((s,p)=>s.selected=p<=o),a.deposits_total=a.deposits.filter(s=>s.selected).reduce((s,p)=>s+parseFloat(p.grandtotal||0),0),a.total=a.deposits_total+(a.loans_total||0),this.changePaymentMode(a.paymentmode_id,a)},onLoanClick(o,a){a.total=0,a.loans.forEach((s,p)=>s.selected=p<=o),a.loans_total=a.loans.filter(s=>s.selected).reduce((s,p)=>s+parseFloat(p.grandtotal||0),0),a.total=(a.deposits_total||0)+a.loans_total,this.changePaymentMode(a.paymentmode_id,a)},postFormCreate(){this.$refs.form.postFormCreate().then(()=>{this.$router.push({name:"mycoperative-payment"})})}}},A={class:"d-flex pa-2"},J={class:"d-flex pa-2"},j={class:"d-flex"};function G(o,a,s,p,R,_){const $=E("form-create");return f(),b($,{getdata:"","with-helpdesk":"","hide-save":"",ref:"form"},{toolbar:l(({record:r})=>[t(x,{disabled:!(r.grandtotal>0&&r.paymentmode_id),onClick:d=>_.postFormCreate(r),icon:"payments"},null,8,["disabled","onClick"])]),default:l(({combos:{paymentmodes:r},record:d,theme:V})=>[d.details_count?(f(),b(g,{key:1,class:"pt-0"},{default:l(()=>[t(M,{color:"primary",label:"Lihat pembayaran mendatang","false-value":null,"true-value":"comming","hide-details":"","onUpdate:modelValue":e=>_.getAllPayment(e,d)},null,8,["onUpdate:modelValue"]),t(L,{modelValue:o.tab,"onUpdate:modelValue":a[0]||(a[0]=e=>o.tab=e),"align-tabs":"center",color:"deep-purple-accent-4"},{default:l(()=>[t(D,{value:"deposit"},{default:l(()=>a[3]||(a[3]=[m("DEPOSIT")])),_:1}),t(D,{value:"pinjaman"},{default:l(()=>a[4]||(a[4]=[m("PINJAMAN")])),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:o.tab,"onUpdate:modelValue":a[1]||(a[1]=e=>o.tab=e)},{default:l(()=>[t(C,{value:"deposit"},{default:l(()=>[(f(!0),T(w,null,h(d.deposits,(e,y)=>(f(),b(P,{key:"deposit-"+y,onClick:c=>_.onDepositClick(y,d)},{default:l(()=>[t(v,{class:"pb-2"},{default:l(()=>[u("div",A,[t(U,{modelValue:e.selected,"onUpdate:modelValue":c=>e.selected=c,readonly:"",color:V},null,8,["modelValue","onUpdate:modelValue","color"]),u("div",null,i(e.name),1)]),t(g,{class:F([`bg-${V}-lighten-5`,"px-3 py-2"])},{default:l(()=>[t(k,{dense:""},{default:l(()=>[t(n,{cols:"2",class:"caption"},{default:l(()=>a[5]||(a[5]=[m("Tenor")])),_:1}),t(n,{cols:"5",class:"caption"},{default:l(()=>a[6]||(a[6]=[m("Tagihan")])),_:1}),t(n,{cols:"5",class:"caption"},{default:l(()=>a[7]||(a[7]=[m("Jatuh Tempo")])),_:1}),t(n,{cols:"2"},{default:l(()=>[u("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(n,{cols:"5"},{default:l(()=>[u("small",null,i(o.formatter.format(e.grandtotal)),1)]),_:2},1024),t(n,{cols:"5"},{default:l(()=>[u("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024),t(C,{value:"pinjaman"},{default:l(()=>[(f(!0),T(w,null,h(d.loans,(e,y)=>(f(),b(P,{key:"loan-"+y,onClick:c=>_.onLoanClick(y,d)},{default:l(()=>[t(v,{class:"pb-2"},{default:l(()=>[u("div",J,[t(U,{modelValue:e.selected,"onUpdate:modelValue":c=>e.selected=c,readonly:"",color:V},null,8,["modelValue","onUpdate:modelValue","color"]),u("div",null,i(e.name),1)]),t(g,{class:F([`bg-${V}-lighten-5`,"px-3 py-2"])},{default:l(()=>[t(k,{dense:""},{default:l(()=>[t(n,{cols:"2",class:"caption"},{default:l(()=>a[8]||(a[8]=[m("Tenor")])),_:1}),t(n,{cols:"5",class:"caption"},{default:l(()=>a[9]||(a[9]=[m("Tagihan")])),_:1}),t(n,{cols:"5",class:"caption"},{default:l(()=>a[10]||(a[10]=[m("Jatuh Tempo")])),_:1}),t(n,{cols:"2"},{default:l(()=>[u("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(n,{cols:"5"},{default:l(()=>[u("small",null,i(o.formatter.format(e.grandtotal)),1)]),_:2},1024),t(n,{cols:"5"},{default:l(()=>[u("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)):(f(),b(g,{key:0,class:"text-center"},{default:l(()=>a[2]||(a[2]=[m(" Tidak ada Pembayaran ")])),_:1})),t(v,{color:`${V}-lighten-5`,flat:"",class:"position-sticky bottom-0 w-100"},{default:l(()=>[u("div",j,[t(n,{cols:"6"},{default:l(()=>a[11]||(a[11]=[u("small",null,"Total Pembayaran",-1)])),_:1}),t(n,{cols:"6",class:"font-weight-bold text-end"},{default:l(()=>[m(i(o.formatter.format(d.grandtotal)),1)]),_:2},1024)]),t(k,null,{default:l(()=>[t(n,{cols:"12"},{default:l(()=>[t(N,{items:r,disabled:!d.details_count,label:"Mode Pembayaran",modelValue:d.paymentmode_id,"onUpdate:modelValue":[e=>d.paymentmode_id=e,e=>_.changePaymentMode(e,d)],"hide-details":""},null,8,["items","disabled","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])]),_:1},512)}const z=I(S,[["render",G],["__scopeId","data-v-9fe9a4d1"]]);export{z as default};
