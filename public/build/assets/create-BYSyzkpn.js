import{_ as $,b,w as l,d as I,o as m,e as t,m as y,n as u,y as N,s as k,g as p,M as B,S as T,j as v,k as C,F as U,T as L,q as d,t as i,G as w,D as c,l as P,U as x,J as F}from"./App-BnHwvTxF.js";import{V as D,a as S}from"./VTabs-Di3EAfem.js";const j={name:"coperative-payment-create",data:()=>({datemenu:!1,formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),statuses:[],tab:"deposit"}),methods:{getPaymentData(n,a){typeof n!="object"||!n||this.$http(`coperative/api/member/${n.value}/get-payment`).then(s=>{a.deposits=s.deposits,a.loans=s.loans,a.details_count=s.details_count,a.deposits_total=0,a.loans_total=0,a.total=0,a.grandtotal=0})},changePaymentMode(n,a){switch(n){case 1:a.grandtotal=a.total;break;case 2:a.grandtotal=a.total+a.sequence;break;case 3:a.grandtotal=a.total+a.sequence;break}},getAllPayment:function(n,a){this.$http("coperative/api/member/get-allpayment",{method:"GET",params:{mode:n}}).then(s=>{a.deposits=s.deposits,a.loans=s.loans,a.details_count=s.details_count,a.deposits_total=0,a.loans_total=0,a.total=0,a.grandtotal=0})},onDepositClick(n,a){a.total=0;for(let s=0;s<a.deposits.length;s++)a.deposits[s].selected=!1;for(let s=0;s<=n;s++)switch(a.deposits[s].selected=!0,a.deposits_total=parseFloat(a.total)+parseFloat(a.deposits[s].grandtotal),a.total=parseFloat(a.deposits_total)+parseFloat(a.loans_total),a.paymentmode_id){case 1:a.grandtotal=a.total;break;case 2:a.grandtotal=a.total+a.sequence;break;case 3:a.grandtotal=a.total+a.sequence;break}},onLoanClick(n,a){a.total=0;for(let s=0;s<a.loans.length;s++)a.loans[s].selected=!1;for(let s=0;s<=n;s++)switch(a.loans[s].selected=!0,a.loans_total=parseFloat(a.total)+parseFloat(a.loans[s].grandtotal),a.total=parseFloat(a.deposits_total)+parseFloat(a.loans_total),a.paymentmode_id){case 1:a.grandtotal=a.total;break;case 2:a.grandtotal=a.total+a.sequence;break;case 3:a.grandtotal=a.total+a.sequence;break}}}},A={class:"d-block pb-2"},J={class:"d-flex pa-2"},E={class:"d-block pb-2"},G={class:"d-flex pa-2"},R={key:2,class:"ukuran"},W={class:"d-flex"},z={class:"text-end"},O={class:"d-flex"},H={class:"text-end"};function K(n,a,s,Q,X,f){const q=I("form-create");return m(),b(q,{"with-helpdesk":""},{default:l(({combos:{members:M,paymentmodes:h},record:o,theme:_})=>[t(k,null,{default:l(()=>[t(y,null,{default:l(()=>[t(u,{cols:"12"},{default:l(()=>[t(N,{items:M,modelValue:o.member,"onUpdate:modelValue":[e=>o.member=e,e=>f.getPaymentData(e,o)]},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o.details_count&&o.details_count<=0?(m(),b(k,{key:0,class:"text-center"},{default:l(()=>a[2]||(a[2]=[p(" Tidak ada Pembayaran ")])),_:1})):(m(),b(k,{key:1,class:"pt-0"},{default:l(()=>[t(B,{color:"primary",label:"Lihat pembayaran mendatang","false-value":null,"true-value":"comming","hide-details":"","onUpdate:modelValue":e=>f.getAllPayment(e,o)},null,8,["onUpdate:modelValue"]),t(S,{modelValue:n.tab,"onUpdate:modelValue":a[0]||(a[0]=e=>n.tab=e),"align-tabs":"center",color:"deep-purple-accent-4"},{default:l(()=>[t(D,{value:"deposit"},{default:l(()=>a[3]||(a[3]=[p("DEPOSIT")])),_:1}),t(D,{value:"pinjaman"},{default:l(()=>a[4]||(a[4]=[p("PINJAMAN")])),_:1})]),_:1},8,["modelValue"]),t(L,{modelValue:n.tab,"onUpdate:modelValue":a[1]||(a[1]=e=>n.tab=e)},{default:l(()=>[t(T,{value:"deposit"},{default:l(()=>[(m(!0),v(U,null,C(o.deposits,(e,g)=>(m(),b(P,{lines:"three",key:g,onClick:V=>f.onDepositClick(g,o)},{default:l(()=>[d("div",A,[t(c,null,{default:l(()=>[d("div",J,[d("div",null,[t(x,{density:"compact",modelValue:e.selected,"onUpdate:modelValue":V=>e.selected=V,readonly:"",color:_},null,8,["modelValue","onUpdate:modelValue","color"])]),d("div",null,i(e.name),1)]),t(k,{class:F(["px-3 py-2",`bg-${_}-lighten-5`])},{default:l(()=>[t(y,{dense:""},{default:l(()=>[t(u,{class:"caption",cols:"2"},{default:l(()=>a[5]||(a[5]=[p("Tenor")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[6]||(a[6]=[p("Tagihan")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[7]||(a[7]=[p("Jatuh Tempo")])),_:1}),t(u,{cols:"2"},{default:l(()=>[d("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[d("small",null,i(n.formatter.format(e.grandtotal)),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[d("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:2},1024),t(T,{value:"pinjaman"},{default:l(()=>[(m(!0),v(U,null,C(o.loans,(e,g)=>(m(),b(P,{lines:"three",key:g,onClick:V=>f.onLoanClick(g,o)},{default:l(()=>[d("div",E,[t(c,null,{default:l(()=>[d("div",G,[d("div",null,[t(x,{density:"compact",modelValue:e.selected,"onUpdate:modelValue":V=>e.selected=V,readonly:"",color:_},null,8,["modelValue","onUpdate:modelValue","color"])]),d("div",null,i(e.name),1)]),t(k,{class:F(["px-3 py-2",`bg-${_}-lighten-5`])},{default:l(()=>[t(y,{dense:""},{default:l(()=>[t(u,{class:"caption",cols:"2"},{default:l(()=>a[8]||(a[8]=[p("Tenor")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[9]||(a[9]=[p("Tagihan")])),_:1}),t(u,{class:"caption",cols:"5"},{default:l(()=>a[10]||(a[10]=[p("Jatuh Tempo")])),_:1}),t(u,{cols:"2"},{default:l(()=>[d("small",null,i(e.tenor)+"/"+i(e.tenor_total),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[d("small",null,i(n.formatter.format(e.grandtotal)),1)]),_:2},1024),t(u,{cols:"5"},{default:l(()=>[d("small",null,i(e.duedate),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)),o.details_count&&o.details_count<=0?(m(),v("div",R,[t(c,{color:`${_}-lighten-5`,flat:"",class:"positionfixed","scroll-behavior":"elevate"},{default:l(()=>[d("div",W,[t(u,{cols:"6"},{default:l(()=>a[11]||(a[11]=[d("small",null,"Total Pembayaran",-1)])),_:1}),t(u,{cols:"6",class:"font-weight-bold"},{default:l(()=>[d("div",z,i(n.formatter.format(o.grandtotal)),1)]),_:2},1024)]),t(y,null,{default:l(()=>[t(u,{cols:"12"},{default:l(()=>[t(w,{items:h,disabled:o.details_count&&o.details_count<=0,label:"Mode Pembayaran",modelValue:o.paymentmode_id,"onUpdate:modelValue":[e=>o.paymentmode_id=e,e=>f.changePaymentMode(e,o)],return_value:"false","hide-details":""},null,8,["items","disabled","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])])):(m(),b(c,{key:3,color:`${_}-lighten-5`,flat:"",class:"position-sticky bottom-0 w-100","scroll-behavior":"elevate"},{default:l(()=>[d("div",O,[t(u,{cols:"6"},{default:l(()=>a[12]||(a[12]=[d("small",null,"Total Pembayaran",-1)])),_:1}),t(u,{cols:"6",class:"font-weight-bold"},{default:l(()=>[d("div",H,i(n.formatter.format(o.grandtotal)),1)]),_:2},1024)]),t(y,null,{default:l(()=>[t(u,{cols:"12"},{default:l(()=>[t(w,{items:h,disabled:o.details_count&&o.details_count<=0,label:"Mode Pembayaran",modelValue:o.paymentmode_id,"onUpdate:modelValue":[e=>o.paymentmode_id=e,e=>f.changePaymentMode(e,o)],return_value:"false","hide-details":""},null,8,["items","disabled","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"]))]),_:1})}const r=$(j,[["render",K]]);export{r as default};
