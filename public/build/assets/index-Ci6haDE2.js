import{_ as x,b as m,w as o,d as U,o as u,e as t,m as k,n as s,y,s as r,z as E,g as _,h as p,j as D,B as S,C as B,D as I,E as c,G as P,q as T,H as j,I as A,V as g,f as C}from"./App-BnHwvTxF.js";import{V as F,a as L}from"./VRadioGroup-CqNo71pX.js";const O={name:"coperative-report",data:()=>({expand:!1,menuDateStart:!1,menuDateEnd:!1,type_of_options:null,month:new Date().getMonth()+1,year:new Date().getFullYear(),menuDateProcess:!1,render:null}),methods:{downloadPDF:function(n,e,i){this.$http("coperative/api/report-to-pdf",{method:"GET",params:{type:n.value,date_start:e.date_start,date_end:e.date_end,year:e.year,member_id:e.member_id,orientation:e.orientation,month:e.month,date_process:e.date_process},responseType:"blob"}).then(f=>{const b=new Blob([f],{type:"application/pdf"}),d=document.createElement("a");d.href=URL.createObjectURL(b),d.download=n.value+".pdf",d.click(),URL.revokeObjectURL(d.href)}).catch(()=>{i.$snackbar({text:"there is an error while processing data!"})})},downloadXLS:function(n,e,i){this.$http("coperative/api/report-to-xls",{method:"GET",params:{type:n.value,date_start:e.date_start,date_end:e.date_end,year:e.year,member_id:e.member_id,month:e.month,date_process:e.date_process},responseType:"blob"}).then(f=>{const b=new Blob([f],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=document.createElement("a");d.href=URL.createObjectURL(b),d.download=n.value+".xlsx",d.click(),URL.revokeObjectURL(d.href)}).catch(()=>{i.$snackbar({text:"there is an error while processing data!"})})},onReportTypeChange:function(n,e){this.expand=!0,this.render=null,this.expand=n.has_options,this.type_of_options=n.type_of_options,e.date_start=null,e.date_end=null,e.year=null,e.member=null,e.member_id=null,e.month=null,e.date_process=null;let i=new Date;["deposit_pokok","deposit_wajib","deposit_tabungan"].includes(this.type_of_options)&&(e.year=i.getFullYear()),["loan_mutation_month"].includes(this.type_of_options)&&(e.year=i.getFullYear(),e.month=i.getMonth()+1),["loan_age"].includes(this.type_of_options)&&(e.date_process=new Date().toISOString().substr(0,10))},remapMemberID:function(n,e){e.member_id=[],n.forEach(i=>{e.member_id.push(i.value)})},previewOfReport:function(n,e){this.$http("coperative/api/report-preview",{method:"GET",params:{type:n.value,date_start:e.date_start,date_end:e.date_end,year:e.year,member_id:e.member_id,month:e.month,date_process:e.date_process}}).then(i=>{this.render=i}).catch(()=>{})}}},N={key:1},G={key:2,class:"mt-2"},$=["innerHTML"];function H(n,e,i,f,b,d){const w=U("VueDatePicker"),R=U("page-blank");return u(),m(R,{"page-name":"coperative-report","page-key":"report",title:"Laporan","page-path":"/coperative/api/report","show-sidenav":""},{info:o(({combos:{members:h,types:M},record:a,theme:v,store:V})=>[t(r,null,{default:o(()=>[t(k,{dense:""},{default:o(()=>[t(s,{cols:"12"},{default:o(()=>[t(y,{modelValue:a.selected,"onUpdate:modelValue":[l=>a.selected=l,l=>d.onReportTypeChange(l,a,V)],items:M,label:"Pilih Jenis","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(r,null,{default:o(()=>[n.expand?(u(),m(E,{key:0},{default:o(()=>e[0]||(e[0]=[_("PILIHAN")])),_:1})):p("",!0),["deposit","deposit_detail","loan_payment","loan_mutation_date"].includes(n.type_of_options)?(u(),D("div",N,[t(w,{name:"date_start",modelValue:a.date_start,"onUpdate:modelValue":l=>a.date_start=l,placeholder:"Tanggal Awal ...","text-input":"",format:"dd/MM/yyyy"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),["deposit","deposit_detail","loan_payment","loan_mutation_date"].includes(n.type_of_options)?(u(),D("div",G,[t(w,{name:"date_end",modelValue:a.date_end,"onUpdate:modelValue":l=>a.date_end=l,placeholder:"Tanggal Akhir ...","text-input":"",format:"dd/MM/yyyy"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0)]),_:2},1024),t(j,null,{default:o(()=>[S(t(I,{flat:"",tile:""},{default:o(()=>[t(r,null,{default:o(()=>[t(k,{dense:""},{default:o(()=>[["deposit_pokok","deposit_wajib","deposit_tabungan"].includes(n.type_of_options)?(u(),m(s,{key:0,cols:"12"},{default:o(()=>[t(c,{modelValue:a.year,"onUpdate:modelValue":l=>a.year=l,type:"number",label:"Tahun","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):p("",!0),["loan_mutation_month"].includes(n.type_of_options)?(u(),m(s,{key:1,cols:"6"},{default:o(()=>[t(P,{items:[{title:"Januari",value:1},{title:"Februari",value:2},{title:"Maret",value:3},{title:"April",value:4},{title:"Mei",value:5},{title:"Juni",value:6},{title:"Juli",value:7},{title:"Agustus",value:8},{title:"September",value:9},{title:"Oktober",value:10},{title:"November",value:11},{title:"Desember",value:12}],label:"Bulan",type:"number",modelValue:a.month,"onUpdate:modelValue":l=>a.month=l,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):p("",!0),["loan_mutation_month"].includes(n.type_of_options)?(u(),m(s,{key:2,cols:"6"},{default:o(()=>[t(c,{label:"Tahun",type:"number",modelValue:a.year,"onUpdate:modelValue":l=>a.year=l,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):p("",!0),["loan_age"].includes(n.type_of_options)?(u(),m(s,{key:3,cols:"12"},{default:o(()=>[t(c,{type:"date",modelValue:a.date_process,"onUpdate:modelValue":l=>a.date_process=l,label:"Select a date"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):p("",!0),["deposit","deposit_detail","deposit_pokok","deposit_wajib","deposit_tabungan","loan_payment"].includes(n.type_of_options)?(u(),m(s,{key:4,cols:"12"},{default:o(()=>[t(y,{modelValue:a.member,"onUpdate:modelValue":[l=>a.member=l,l=>d.remapMemberID(l,a)],items:h,label:"Anggota","hide-details":"",multiple:""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):p("",!0),["loan_mutation_date"].includes(n.type_of_options)?(u(),m(s,{key:5,cols:"12"},{default:o(()=>[t(y,{modelValue:a.member,"onUpdate:modelValue":[l=>a.member=l,l=>d.remapMemberID(l,a)],items:h,label:"Anggota","hide-details":"",multiple:""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):p("",!0),["loan_mutation_month","loan_age"].includes(n.type_of_options)?(u(),m(s,{key:6,cols:"12"},{default:o(()=>[t(y,{modelValue:a.member,"onUpdate:modelValue":[l=>a.member=l,l=>d.remapMemberID(l,a)],items:h,label:"Anggota","hide-details":"",multiple:""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):p("",!0),t(s,{cols:"12"},{default:o(()=>e[1]||(e[1]=[T("div",{class:"overline mt-6"}," page orientation ",-1)])),_:1}),t(s,{cols:"12"},{default:o(()=>[t(F,{modelValue:a.orientation,"onUpdate:modelValue":l=>a.orientation=l,"hide-details":"",row:""},{default:o(()=>[t(L,{label:"Landscape",value:"landscape"}),t(L,{label:"Portrait",value:"portrait"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1536),[[B,n.expand]])]),_:2},1024),t(A),t(r,null,{default:o(()=>[t(k,{dense:""},{default:o(()=>[t(s,{cols:"6"},{default:o(()=>[t(g,{color:v,block:"",dark:"",depressed:"",onClick:l=>d.downloadXLS(a.selected,a,V)},{default:o(()=>[t(C,{class:"mr-2"},{default:o(()=>e[2]||(e[2]=[_("downloading")])),_:1}),e[3]||(e[3]=_(" XLS"))]),_:2},1032,["color","onClick"])]),_:2},1024),t(s,{cols:"6"},{default:o(()=>[t(g,{color:v,block:"",dark:"",depressed:"",onClick:l=>d.downloadPDF(a.selected,a,V)},{default:o(()=>[t(C,{class:"mr-2"},{default:o(()=>e[4]||(e[4]=[_("downloading")])),_:1}),e[5]||(e[5]=_(" PDF"))]),_:2},1032,["color","onClick"])]),_:2},1024),t(s,{cols:"12"},{default:o(()=>[t(g,{color:v,block:"",dark:"",depressed:"",onClick:l=>d.previewOfReport(a.selected,a,V)},{default:o(()=>e[6]||(e[6]=[_("preview")])),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:o(()=>[t(r,null,{default:o(()=>[T("div",{flat:"",tile:"",innerHTML:n.render},null,8,$)]),_:1})]),_:1})}const Y=x(O,[["render",H]]);export{Y as default};
